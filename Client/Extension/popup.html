<!DOCTYPE HTML>
<html>
  <head>
	<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1' lang='en-gb' />
  	<title>MintSync</title>
	<link rel="stylesheet" href="css/common.css" type="text/css" />
	<link rel="stylesheet" href="css/popup.css" type="text/css" />
	<script type="text/javascript" src='js/jquery.js'></script>
	<script type="text/javascript" src='js/jquery.tools.min.1.2.5.js'></script>
	
	<script type="text/javascript" src="js/sha.js"></script>
	<script type="text/javascript" src="js/AES.js"></script>
	
	<script type="text/javascript" src="js/php_js/utf8_decode.js"></script>
	<script type="text/javascript" src="js/php_js/utf8_encode.js"></script>
	<script type="text/javascript" src="js/php_js/base64_decode.js"></script>
	<script type="text/javascript" src="js/php_js/base64_encode.js"></script>
	
	<script type="text/javascript" src="js/MintCryptoWrapper.js"></script>
	<script type="text/javascript" src="js/MintSync.js"></script>
	<script type="text/javascript" src="js/globalfunctions.js"></script>
	<script type="text/javascript" src="js/json2.js"></script>

	<script type="text/javascript" src='js/lightboxes.js'></script>
	<script type="text/javascript" src='js/popup.js'></script>
  </head>
  <body>
	<div id='popupContainer ' unselectable='on' >

		<div id='iconBar'>
			<a href='options.html' alt='Options' onclick='openNewTabFromPopup(this); return false;'><img src='img/options.png' /></a> 
			<a href='passwordMatrix.html' alt='Credentials List' onclick='openNewTabFromPopup(this); return false;'><img src='img/credentials_list.png' /></a> 
			<a href='popup.html' alt='Maximise' id='maximise' class='hidden_when_max' onclick='openPopupFullScreen(this); return false;'><img src='img/maximise_16.png' /></a> 
		</div>
	
		<ul id='tabBar'  unselectable='on' >
			<li unselectable='on' >Retrieve</li>
			<li unselectable='on' >Save/Generate</li>
		</ul>
		
		<div id='tabContent'  unselectable='on' >
			<fieldset id='retrieve'  unselectable='on' >
				<div id='loadingDiv' class='hidden'>
					<span>Fetching...</span>
					<span><img src='img/ajax_load.gif' alt='Loading...' /></span>
				</div>
				<div id='fetchDiv'>
					<div id='retrieveOutput' class='hidden' >
						<table class='results'>
							<thead>
								<tr>
									<th>Key</th>
									<th>Value</th>
									<th></th>
								</tr>
							</thead>
							<tfoot>
								<tr>
								</tr>
							</tfoot>
							<tbody>
							</tbody>
						</table>
					</div>	
					<p  unselectable='on' >
						Click retrieve to fetch and decrypt the stored information
					</p>
					<form action='javascript:void(0);' onsubmit='getPasswords($("#domainInput").val()); return false;'>
						<p>
							<span id='fullscreen_url'></span>
							<input type='hidden' name='domain' id='domainInput' /><input type='submit' value='Retrieve'/>
						</p>
					</form>
				</div>
				<div id='fetchErrorDiv'>
				</div>
			</fieldset>
			
			<fieldset id='save' class='hidden'  unselectable='on' >
				<form action='#' onsubmit='setPassword(this); return false;'  unselectable='on' >
					<p><label unselectable='on' >URL/Domain:</label> <input type='text' name='domainName' id='domainName' /></p>
					<p unselectable='on' ><label unselectable='on' >Credentials:</label> <span class='mini-instructions' unselectable='on' >Generate: Right Click (Ctrl+G), Inject: Ctrl+I</span></p>
					<div id='inputPassContainer'>
					</div>
					<p id='addPairP' onclick='addPair(); return false;' class='hangingTab' unselectable='on'  >
						<img src='img/add.png' alt='Add Pair' class='jsAction' /> A<span class='underline'>d</span>d More
					</p>
					<p class='hangingTab'  unselectable='on' >
						<input type='checkbox' name='force' id='canForceWrite' /><label for='canForceWrite'><span class='mini-instructions' unselectable='on' >Allow Overwrite</span></label>
					</p>
					<!-- the template used for the new rows: -->
					<div id='rowTemplate' class='hidden' >
						<p> 
							<input type='text' name='inputPassName' class='inputLabel'  /> 
							<input type='password' name='inputPassValue' class='inputPass injectValueSourceElement' onfocus='revealPassword(this);' onblur='rehidePassword(this);' />
							<!-- span around the img is a hack to make the XPath to the password box analogous to the one used on retrieve -->
							<img src='img/del.png' alt='Delete Pair' onclick='delPair(this); return false' class='jsAction saveBin' /><span><img src='img/document_import.png' alt='Insert Password' onclick='injectPass(this); return false' class='jsAction injectPW hidden_when_max' /></span>
						</p>
					</div>
					<div>
						<p class='submitContainer'><input type='submit' value='Save' id='saveButton'/></p>
						<div id='saveOutput'></div>
					</div>
				</form>
				
			</fieldset>
		</ul>
	</div>
  </body>
</html>